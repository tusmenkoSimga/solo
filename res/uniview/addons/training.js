/*! Cortona3D Solo Universal Viewer bundle - training, Copyright (c) 2015-2018 Paragraphics, Ltd. (http://www.cortona3d.com/) */
define(function(){return function(t){function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([,function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){function dispatch(t,e){t[e]&&t[e].apply(t,Array.prototype.slice.call(arguments,2))}function node_value(t){return t||null}function parse_node(node,name){var result=null;return node&&eval("result = new "+_CONSTRUCTORS[name]+"().loadFromNode(node);"),result}function Scenario(){this.id=null,this.steps={},this.variables={},this.parts=null,this.viewpoints=null,this.description="",this.comments=null,this.url="",this.vrmlUrl="",this.odfUrl="",this.odfId=null,this.version=null,this.username=null,this.initialStep=null,this.history=new History(this),this.activeStep=null,this.active=!1,this.score_accumulator=0,this.steps_count=0,this.successStatus="unknown",this.startTime=0,_scenario=this}function Scenario_getVar(t){var e="_"+t,i="_$"+t;if(!(e in this.variables||i in this.variables))throw new Error(404,"Variable '"+t+"' not defined.");return i in this.variables?this.variables[i].valueOf():this.variables[e].valueOf()}function Scenario_setVar(t,e){var i="_"+t,s="_$"+t;if(!(i in this.variables||s in this.variables))throw new Error(404,"Variable '"+t+"' not defined.");s in this.variables?this.variables[s].setValue(e):this.variables[i].setValue(e)}function Scenario_getSessionTime(){return Math.round(((new Date).valueOf()-this.startTime.valueOf())/10)/100}function Scenario_getSuccessStatus(){return this.successStatus}function Scenario_getScaledScore(){return 0==this.steps_count?1:this.score_accumulator/this.steps_count}function Scenario_initialize(){this.active=!1,this.activeStep=null,this.score_accumulator=0,this.steps_count=0,this.successStatus="unknown";for(var t in this.variables)this.variables[t].initialize()}function Scenario_loadFromNode(t){return this.description=t.$text("description"),this.comments=t.$text("comment"),this.vrmlUrl=t.$text("vrml-file"),this.odfUrl=t.$text("document-file"),this.id=t.$attr("id"),this.odfId=t.$attr("document-ref")||(this.odfUrl?null:this.id),this.version=t.$text("version"),this.initialStep=null,this.activeStep=null,this.initialize(),this.variables={},t.$("variables/variable").forEach(function(t){this.variables[t.$attr("name")]=parse_node(t,"variable")},this),this.viewpoints=parse_node(t.$("viewpoints/viewpoint"),"viewpoints"),this.parts=parse_node(t.$("objects/object"),"objects"),this.steps={},t.$("steps/step").forEach(function(t,e){var i=parse_node(t,"step");this.steps[i.id]=i,0===e&&(this.initialStep=i)},this),this}function Scenario_isLoaded(){return this.initialStep}function Scenario_isActive(){return this.active}function Scenario_start(){this.isLoaded()&&!this.active&&(this.startTime=new Date,this.initialize(),this.active=!0,this.successStatus="passed",this.history.initialize(),this.history.push(new HistoryStartScenario(this.variables)),dispatch(this,"on_scenario_start"),this.startStep(this.initialStep))}function Scenario_cancel(){this.active&&(this.active=!1,this.successStatus="failed",this.history.push(new HistoryFinishScenario(this.getSuccessStatus(),this.getScaledScore(),this.variables)),dispatch(this,"on_scenario_cancel"),this.initialize())}function Scenario_fail(){this.active&&(this.successStatus="failed",this.startStep())}function Scenario_startStep(t){if(this.active)if(this.activeStep&&(this.steps_count+=Math.abs(this.activeStep.weight),this.score_accumulator+=this.activeStep.getScaledScore()*this.activeStep.weight,dispatch(this,"on_step_finish",this.activeStep),this.history.steps.length&&(this.history.steps[this.history.steps.length-1].score=this.activeStep.getScaledScore())),this.activeStep=t,this.activeStep)this.activeStep.initialize(),dispatch(this,"on_step_start",this.activeStep),this.history.push(new HistoryStep(this.activeStep,this.variables)),this.processStep();else{this.active=!1;var e=0;try{e=this.getVar("cmi.scaled_passing_score")}catch(t){}this.getScaledScore()<e&&(this.successStatus="failed"),this.history.push(new HistoryFinishScenario(this.getSuccessStatus(),this.getScaledScore(),this.variables)),dispatch(this,"on_scenario_finish")}}function Scenario_processStep(){if(this.active&&this.activeStep){var t=this.activeStep.getExpectedOperations();t.length>0?dispatch(this,"on_expected_operations",t):this.startStep(this.activeStep.nextStep())}}function Scenario_processInput(oInput){if(this.active&&this.activeStep){var leo=this.activeStep.getExpectedOperations(),aOperations=[],bError=!!oInput;this.history.push(new HistoryInput(oInput));for(var i=0;i<leo.length;i++)if(leo[i].checkPattern(oInput)){if(oInput&&oInput.constructor==Variable&&(this.variables[oInput.name].value=oInput.value,bError=!1),!oInput||oInput.constructor!=String){aOperations.push(leo[i]),this.history.push(new HistoryOperation(leo[i],this.variables)),leo[i].assignments&&leo[i].assignments.array.forEach(function(t){t.proceed()});try{eval(leo[i].script)}catch(t){alert("ERROR: "+t.message+"\r\n\n"+leo[i].script)}bError=!1}oInput&&oInput.constructor==String&&(bError=!1)}!leo.length&&oInput&&oInput.constructor!=Activity&&(bError=!1),aOperations.length>0?dispatch(this,"on_operations",aOperations,oInput):bError&&(this.activeStep.errors++,this.history.push(new HistoryFault(this.activeStep.errorLimits-this.activeStep.errors+1)),dispatch(this,"on_step_input_failed",this.activeStep,oInput))}}function Variable(){this.cmi="",this.name="",this.value=null,this.type="string",this.defaultValue=null,this.description="",this.comments=null,this.items=[]}function Variable_initialize(){this.cmi&&rtsAPI.isStub()&&rtsAPI.getAPI().SetValue(this.cmi,this.defaultValue,!0),this.value=this.defaultValue}function Variable_valueOf(){var t="";if(this.cmi){var e=rtsAPI.get(this.cmi);if(void 0!==e)if("enumeration"!=this.type)this.value=e;else{for(var i=0;i<this.items.length&&this.items[i]!=e;i++);i<this.items.length&&(this.value=i)}}switch(this.type){case"enumeration":this.items&&this.value>=0&&this.value<this.items.length&&(t=this.items[this.value].valueOf());break;default:t=this.value.valueOf()}return t}function Variable_defaultValueOf(){var t="";switch(this.type){case"enumeration":this.items&&this.value>=0&&this.value<this.items.length&&(t=this.items[this.defaultValue].valueOf());break;default:t=this.defaultValue.valueOf()}return t}function Variable_equal(t){return t.name==this.name}function Variable_setValue(value){switch(this.cmi&&("enumeration"==this.type?this.items&&value>=0&&value<this.items.length&&rtsAPI.set(this.cmi,this.items[value]):rtsAPI.set(this.cmi,value)),this.type){case"enumeration":case"numeric":case"number":this.value=new Number(value);break;case"boolean":this.value=new Boolean(Number(value));break;case"string":if(/^\{[\s\S\n]*\}$/.test(value)){try{this.value=new String(eval("(function()"+value+")();"))}catch(t){alert("EVALUATE EXCEPTION: "+t.message),this.value=""}break}default:this.value=new String(value)}}function Variable_getValueString(){var t;if(this.cmi){var e=rtsAPI.get(this.cmi);if(void 0!==e)if("enumeration"!=this.type)this.value=e;else{for(var i=0;i<this.items.length&&this.items[i]!=e;i++);i<this.items.length&&(this.value=i)}}switch(this.type){case"numeric":case"number":case"boolean":case"enumeration":t=this.value.toString();break;case"string":t='"'+this.value.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"';break;default:t=this.value}return t}function Variable_loadFromNode(t){return t?(this.name=t.$attr("name"),this.trueName=this.name.replace(/^_\$?/,""),this.hidden=0===this.name.indexOf("_$"),this.type=t.$attr("type"),this.setValue(t.$attr("initial-value")),this.defaultValue=this.value,this.description=t.$text("description"),this.comments=t.$text("comment"),this.items=parse_node(t.$("list/list-item"),"list"),0===this.name.indexOf("_cmi.")&&(this.cmi=this.name.substring(1)),this):null}function Variable_toString(){return'Variable { name "'+this.name+'" value "'+this.valueOf()+'" }'}function Variable_toXML(){return'<variable name="'+this.name+'">'+xmltext(this.value)+"</variable>\r\n"}function Step(){this.id=null,this.odfId=null,this.sequence=null,this.nextstep=null,this.description="",this.comments=null,this.viewpoints=null,this.errorLimits=3,this.weight=1,this.errors=0,this.completed=!1}function Step_getRemainingAttempts(){var t=-1;return this.errorLimits>=0&&(t=this.errorLimits-this.errors+1),t}function Step_getSuccessStatus(){return this.completed?this.errors<this.errorLimits?"passed":"failed":"unknown"}function Step_getScaledScore(){var t=1;return this.errorLimits>0?t=Math.max(0,1-this.errors/this.errorLimits):0===this.errorLimits&&(t=0===this.errors?1:0),t}function Step_initialize(){this.succesStatus="unknown",this.errors=0,this.completed=!1,this.sequence&&this.sequence.initialize()}function Step_getExpectedOperations(){var t=[];return this.sequence&&(t=this.sequence.getExpectedOperations()),t}function Step_nextStep(){var t=null;return this.nextstep&&(t=this.nextstep.proceed()),t}function Step_loadFromNode(t){if(t){this.id=t.$attr("id"),this.odfId=t.$attr("document-ref")||this.id,this.errorLimits=Number(t.$attr("faults-count")),this.weight=Number(t.$attr("weight")),this.description=t.$text("description"),this.comments=t.$text("comment");var e=t.$("action/*");return e.length>0&&(this.sequence=parse_node(e[0],e[0]["@name"])),this.nextstep=parse_node(t.$("next-step/jump"),"next-step"),this.viewpoints=parse_node(t.$("viewpoints/viewpoint"),"viewpoints"),this}return null}function Step_getOperations(){var t=[];return this.sequence&&(t=t.concat(this.sequence.getOperations())),t}function Sequence(){this.children=[],this.current=0,this.description="",this.comments=null}function Sequence_initialize(){this.current=0,this.children.forEach(function(t){t.initialize()})}function Sequence_isCompleted(){for(;this.current<this.children.length&&this.children[this.current].isCompleted();)this.current++;return this.children.length==this.current}function Sequence_isActive(){if(this.isCompleted())return!0;for(var t=0,e=0;e<=this.current;e++)this.children[e].isActive()&&t++;return t>0}function Sequence_getExpectedOperations(){var t=[];return this.isCompleted()||(t=this.children[this.current].getExpectedOperations()),t}function Sequence_loadFromNode(t){return t?(this.description=t.$text("description"),this.comments=t.$text("comment"),this.children=t.$("*").filter(function(t){return" seq-group and-group or-group operation ".indexOf(" "+t["@name"]+" ")>=0}).map(function(t){return parse_node(t,t["@name"])}),this):null}function Sequence_getOperations(){for(var t=[],e=0;e<this.children.length;e++)t=t.concat(this.children[e].getOperations());return t}function Sequence_isInteractivity(){return!0}function SequenceAND(){this.children=[],this.description="",this.comments=null}function SequenceAND_initialize(){this.children.forEach(function(t){t.initialize()})}function SequenceAND_isCompleted(){for(var t=0,e=0;e<this.children.length;e++)this.children[e].isCompleted()&&t++;return t==this.children.length}function SequenceAND_isActive(){if(this.isCompleted())return!0;for(var t=0,e=0;e<this.children.length;e++)this.children[e].isActive()&&t++;return t>0}function SequenceAND_getExpectedOperations(){var t=[];if(!this.isCompleted())for(var e=0;e<this.children.length;e++)this.children[e].isCompleted()||(t=t.concat(this.children[e].getExpectedOperations()));return t}function SequenceOR(){this.children=[],this.description="",this.comments=null}function SequenceOR_initialize(){this.children.forEach(function(t){t.initialize()})}function SequenceOR_isCompleted(){for(var t=0,e=0;e<this.children.length;e++)this.children[e].isCompleted()&&t++;return t>0}function SequenceOR_getExpectedOperations(){var t=[];if(!this.isCompleted()){for(var e=null,i=0;i<this.children.length;i++)if(t=t.concat(this.children[i].getExpectedOperations()),this.children[i].isActive()){e=this.children[i];break}e&&(t=e.getExpectedOperations())}return t}function SequenceOR_getOperations(){var t=[];return this.children.length>0&&(t=t.concat(this.children[0].getOperations())),t}function Operation(){this.id=null,this.activity=null,this.animation=null,this.message=null,this.description="",this.comments=null,this.odfId=null,this.assignments=null,this.script="",this.completed=!1}function Operation_toXML(){var t='<operation  ref="'+this.id+'" document-ref="'+(this.odfId?this.odfId:"")+'">';if(t+="<description>"+this.description+"</description>",this.activity){var e=this.activity.getTemplate();e&&(t+=e.toXML())}if(this.message&&(t+="<message>"+this.message+"</message>"),this.assignments)for(var i in this.assignments.assoc)t+=this.assignments.assoc[i].toXML();return t+="</operation>\r\n"}function Operation_initialize(){this.completed=!1,this.activity&&this.activity.initialize()}function Operation_isCompleted(){return this.completed}function Operation_isActive(){return!(!this.activity||this.activity.constructor!=Activity)&&this.activity.selected.or()}function Operation_checkPattern(t){if(this.activity){if(this.activity.equal(t))return this.completed=t.constructor!=String,this}else if(this.activity==t)return this.completed=!0,this;return null}function Operation_getExpectedOperations(){var t=[];return this.isCompleted()||t.push(this),t}function Operation_loadFromNode(t){if(t){this.description=t.$text("description"),this.comments=t.$text("comment"),this.animation=parse_node(t.$("animation/animstep"),"animation"),this.animation&&(this.animation.initialFraction=Number(t.$("animation")[0].$attr("initial-fraction")||0)),this.message=t.$text("message");var e=t.$("alert")[0],i=t.$("request-variable")[0],s=t.$("activity")[0];e?this.activity=parse_node(e,"alert"):i?this.activity=parse_node(i,"request-variable"):s&&(this.activity=parse_node(s,"activity")),this.script=t.$text("script")||"",this.id=t.$attr("id"),this.odfId=t.$attr("document-ref")||this.id,this.assignments=parse_node(t.$("assignments/assignment"),"assignments");try{this.activity.setOperation(this)}catch(t){}return this}return null}function Operation_getOperations(){var t=[];return t.push(this),t}function Operation_isInteractivity(){var t=this.activity;if(t){if(t.constructor==Activity){if(t.objects.length>0)return!0;if(t.lists.length>0&&t.lists[0].items.length>0)return!0}if(t.constructor==RequestVariable)return!0}return!1}function Animation(){this.substeps=[],this.initialFraction=0}function Animation_loadFromNode(t){return this.substeps=t.map(function(t){return t.$text()}),t.length>0?this:null}function Alert(){this._type="Alert",this.type="note",this.odfId=null,this.description=""}function Alert_toXML(){var t='<alert document-ref="'+(this.odfId?this.odfId:"")+'">';return t+="<description>"+this.description+"</description>",t+="</alert>\r\n"}function Alert_setOperation(t){this.odfId=t.odfId,this.description=t.description}function Alert_equal(t){return t===this}function Alert_loadFromNode(t){return t?(this.type=t.$attr("type")||"note",this):null}function Alert_isActive(){return!0}function Alert_initialize(){}function Alert_getTemplate(){return this}function RequestVariable(){this._type="RequestVariable",this.prompt="",this.name="",this.value=null}function RequestVariable_isActive(){return!0}function RequestVariable_initialize(){}function RequestVariable_equal(t){var e=!1;return t&&t.constructor==Variable&&t.name==this.name&&(e=!0),e}function RequestVariable_loadFromNode(t){return t?(this.prompt=t.$text(),this.name=t.$attr("variable-name"),this.value=t.$attr("default-value"),this):null}function RequestVariable_getTemplate(){var t=new Variable;return t.name=this.name,t.value=arguments.length>0?arguments[0][this.name]:this.value,t}function Activity(){this._type="Activity",this.description="",this.comments=null,this.objects=[],this.lists=[],this.selected=[],this.selectionType=0}function Activity_initialize(){this.selected.length=this.objects.length;for(var t=0;t<this.selected.length;t++)this.selected[t]=!1}function Activity_isActive(){function t(t){return t}return 0===this.selected.length||(0===this.selectionType?this.selected.every(t):this.selected.some(t))}function Activity_equal(t){var e,i=!1;if(t)switch(t.constructor){case Template:var s=this.getTemplate(),n=s.objects;for(i=n.length==t.objects.length,e=0;e<n.length&&i;e++)i=i&&n[e]==t.objects[e];for(e=0;e<this.lists.length&&i;e++)i=i&&t.para[this.lists[e].text]==this.lists[e].items[0];break;case String:for(e=0;e<this.objects.length;e++)if(this.objects[e]==t){this.selected[e]=!0,i=!0;break}}else i=0===this.objects.length&&0===this.lists.length;return i}function Activity_loadFromNode(t){if(t){var e=(t.$attr("multiple-object-selection-type")||"and").toLowerCase();return this.description=t.$text("description"),this.comments=t.$text("comment"),this.selectionType="or"==e?1:0,this.objects=t.$("object-ref").map(function(t){return t.$text()}),this.lists=t.$("question").map(function(t){return parse_node(t,"question")}),this.objects.length+this.lists.length===0?null:this}return null}function Activity_getTemplate(){var t,e={};for(t=0;t<this.lists.length;t++)e[this.lists[t].text]=this.lists[t].items[0];var i=[];if(!this.isActive()&&this.objects.length>0)0===this.selectionType?i=this.objects:i.push(this.objects[0]);else for(t=0;t<this.objects.length;t++)this.selected[t]&&i.push(this.objects[t]);return new Template(i,e)}function Template(t,e){this.objects=t,this.para=e}function Template_toXML(){for(var t="<template>",e=0;e<this.objects.length;e++)t+="<object>"+xmltext(this.objects[e])+"</object>";for(var i in this.para)t+='<para name="'+i+'">'+xmltext(this.para[i])+"</para>";return t+="</template>\r\n"}function Template_equal(t){var e,i=t.objects.length==this.objects.length;for(e=0;e<this.objects.length&&i;e++)i=i&&this.objects[e]==t.objects[e];for(e=0;e<t.lists.length&&i;e++)i=i&&this.para[t.lists[e].text]==t.lists[e].items[0];return i}function Template_toString(){for(var t="Template { ",e=0;e<this.objects.length;e++)t+='object "'+this.objects[e]+'" ';for(var i in this.para)t+='option { name "'+i+'" value "'+this.para[i]+'" } ';return t+="}"}function Question(){this.text="",this.items=[]}function Question_loadFromNode(t){if(t){this.text=t.$attr("text"),this.items=parse_node(t.$("list/list-item"),"list")||[];var e=Number(t.$attr("right-answer"))||0;if(e>0&&e<this.items.length){var i=this.items[0];this.items[0]=this.items[e],this.items[e]=i}return this}return null}function List(){}function List_loadFromNode(t){return t.map(function(t){return t.$text()})}function Next(){this.description="",this.comments=null,this.children=[]}function Next_loadFromNode(t){return this.children=t.map(function(t){return parse_node(t,"jump")}),t.length>0?this:null}function Next_proceed(){var step=null,var_syntax="";for(var key in _scenario.variables)_scenario.variables[key].cmi||(var_syntax+="var "+key+" = "+_scenario.variables[key].getValueString()+";");for(var i=0;i<this.children.length;i++){var result=!0;if(this.children[i].condition){result=!1;var cond=this.children[i].condition.replace(/_(cmi\.[\w\d\.]+)/g,'rtsAPI.get("$1")'),syntax=var_syntax+"return ("+cond+");";try{result=eval("(function(){"+syntax+"})();")}catch(t){alert("CONDITION WARNING: "+t.message+"\r\n\n"+syntax)}}if(result){var next_step_id=this.children[i].step_id;next_step_id&&void 0!==_scenario.steps[next_step_id]&&(step=_scenario.steps[next_step_id]);break}}return step}function Jump(){this.condition=null,this.step_id=null}function Jump_loadFromNode(t){return t?(this.step_id=t.$attr("step"),this.condition=t.$text("condition"),this):null}function Viewpoint(){this.substep=null,this.value=null,this.description="",this.comments=null}function Viewpoint_loadFromNode(t){return t?(this.substep=t.$text("animstep"),this.value=t.$text("viewpoint-value"),this.value&&(this.value=this.value.replace(/^\s+|\s+$/,"").split(" "),13==this.value.length?this.value[12]=0:this.value=null),this.description=t.$text("description"),this.comments=t.$text("comment"),this):null}function Viewpoints(){this._CHILD_NODE_NAME="viewpoint",this._KEY_NAME="description",this.array=[],this.assoc={}}function _AbstractHolder_loadFromNode(t){this.array=[],this.assoc={};for(var e=0;e<t.length;e++){var i=parse_node(t[e],this._CHILD_NODE_NAME);this.array.push(i),this.assoc[i[this._KEY_NAME]]=i}return this}function _AbstractHolder_getAssocArray(){return result}function Part(){this.vrmlref=null,this.name=null,this.metainfo=null}function Part_loadFromNode(t){return t?(this.vrmlref=t.$attr("id"),this.name=t.$attr("name"),this.metainfo=(new Metainfo).loadFromNode(t.$("metainfo")),this):null}function Parts(){this._CHILD_NODE_NAME="object",this._KEY_NAME="vrmlref",this.array=[],this.assoc={}}function Meta(){this.name="",this.type="string",this.value=""}function Meta_loadFromNode(t){return t?(this.name=t.$attr("name"),this.type=(t.$attr("type")||"").toLowerCase()||"string",this.value=t.$text(),"viewpoint-value"==this.type&&(this.value=this.value.replace(/^\s+/,"").replace(/\s+$/,"").split(" ")),this):null}function Meta_toString(){return this.value}function Metainfo(){this._CHILD_NODE_NAME="metainfo",this._KEY_NAME="name",this.array=[],this.assoc={}}function Assignments(){this._CHILD_NODE_NAME="assignment",this._KEY_NAME="name",this.array=[],this.assoc={}}function Assignment(){this.name="",this.expression=""}function Assignment_toXML(){return'<assignment name="'+this.name+'">'+xmltext(this.expression)+"</assignment>\r\n"}function Assignment_loadFromNode(t){return t?(this.name=t.$attr("variable-name"),this.expression=t.$attr("new-value"),this):null}function Assignment_proceed(){_scenario.variables[this.name].setValue(this.expression)}function History(t){this.XMLNS="http://services.parallelgraphics.com/vm/mmr/vm-training-history-xml/all",this.scenario=t,this.steps=[],this.start=null,this.finish=null}function History_toXML(){function t(t,e){return" "+t+'="'+e+'"'}var e="<scenario-history "+t("xmlns",this.XMLNS)+t("ref",this.scenario.id)+(this.scenario.odfId?t("document-ref",this.scenario.odfId):"")+(this.scenario.version?t("version",this.scenario.version):"")+(this.scenario.username?t("user",this.scenario.username):"")+">\r\n";e+="<description>"+xmltext(this.scenario.description)+"</description>\r\n",e+='<scenario-file src="'+this.scenario.vrmlUrl.replace(/.wrl/,".training.xml")+'" />\r\n',e+=this.start.toXML(),e+="<steps>\r\n";for(var i=0;i<this.steps.length;e+=this.steps[i++].toXML());return e+="</steps>\r\n",e+=this.finish.toXML(),e+="</scenario-history>\r\n"}function History_initialize(){this.steps=[]}function History_isEmpty(){return!this.steps.length}function History_drop(){for(var t=[],e=0;e<this.steps.length;e++)t=t.concat(this.steps[e].getSubsteps());return t}function History_pop(){return this.steps.pop()}function History_push(t){switch(t.constructor){case HistoryStartScenario:this.start=t;break;case HistoryFinishScenario:this.finish=t;break;case HistoryStep:this.steps.push(t);break;case HistoryOperation:case HistoryInput:case HistoryFault:this.steps.length>0&&this.steps[this.steps.length-1].history.push(t)}}function HistoryStep(t,e){this.step=t,this.history=[],this.variables_set={},this.score=0,this.weight=t.weight,this.faultsLimit=t.errorLimits;for(var i in e)this.variables_set[i]=e[i].valueOf()}function HistoryStep_toXML(){var t='<step ref="'+this.step.id+'" document-ref="'+(this.step.odfId?this.step.odfId:"")+'" score="'+this.score+'" weight="'+this.weight+'" faultsLimit="'+this.faultsLimit+'">';t+="<description>"+xmltext(this.step.description)+"</description>",t+="<variables-set>";for(var e in this.variables_set)t+='<variable name="'+e+'">'+xmltext(this.variables_set[e])+"</variable>";t+="</variables-set>",t+="<history>";for(var i=0;i<this.history.length;t+=this.history[i++].toXML());return t+="</history>",t+="</step>\r\n"}function HistoryStep_getSubsteps(){for(var t=[],e=0;e<this.history.length;e++)if(this.history[e].constructor==HistoryOperation){var i=this.history[e].value.animation;i&&(t=t.concat(i.substeps))}return t}function HistoryStep_isNotInteractive(){for(var t=!0,e=0;e<this.history.length&&t;e++)this.history[e].constructor==HistoryInput&&(t=t&&(!this.history[e].value||this.history[e].value.constructor==Alert));return t}function HistoryInput(t){this.value=t,this.timestamp=new Date,this.location=[];try{this.location=api.get_viewpoint_data()}catch(t){}}function HistoryInput_toXML(){var t='<history-item timestamp="'+this.timestamp.toUTCString()+'" type="input">';return 13==this.location.length&&(t+="<viewpoint-value>"+this.location.join(" ")+"</viewpoint-value>"),this.value?this.value.constructor==String?t+="<select><object>"+xmltext(this.value)+"</object></select>":t+=this.value.toXML():t+="<null/>",t+="</history-item>\r\n"}function HistoryOperation(t,e){this.value=t,this.timestamp=new Date,this.variables_set={};for(var i in e)this.variables_set[i]=e[i].valueOf()}function HistoryOperation_toXML(){var t='<history-item timestamp="'+this.timestamp.toUTCString()+'" type="operation">';t+="<variables-set>";for(var e in this.variables_set)t+='<variable name="'+e+'">'+xmltext(this.variables_set[e])+"</variable>";return t+="</variables-set>",t+=this.value.toXML(this.variables_set),t+="</history-item>\r\n"}function HistoryFault(t){this.value=t,this.timestamp=new Date}function HistoryFault_toXML(){var t='<history-item timestamp="'+this.timestamp.toUTCString()+'" type="fault">';return t+="<fault>"+this.value+"</fault>",t+="</history-item>\r\n"}function HistoryStartScenario(t){this.timestamp=new Date,this.variables_set={};for(var e in t)this.variables_set[e]=t[e].valueOf()}function HistoryStartScenario_toXML(){var t='<start timestamp="'+this.timestamp.toUTCString()+'">';t+="<variables-set>";for(var e in this.variables_set)t+='<variable name="'+e+'">'+xmltext(this.variables_set[e])+"</variable>";return t+="</variables-set>",t+="</start>\r\n"}function HistoryFinishScenario(t,e,i){this.status=t,this.score=e,this.timestamp=new Date,this.variables_set={};for(var s in i)this.variables_set[s]=i[s].valueOf()}function HistoryFinishScenario_toXML(){var t='<finish timestamp="'+this.timestamp.toUTCString()+'">';t+="<variables-set>";for(var e in this.variables_set)t+='<variable name="'+e+'">'+xmltext(this.variables_set[e])+"</variable>";return t+="</variables-set>",t+="<status>"+this.status+"</status>",t+="<score>"+Math.floor(100*this.score)/100+"</score>",t+="</finish>\r\n"}function xmltext(t){var e=new ActiveXObject("Microsoft.XMLDOM"),i=e.createDocumentFragment();return i.appendChild(e.createTextNode(t)),i.xml}var rtsAPI=__webpack_require__(2),PRODUCTION,_CONSTRUCTORS={scenario:"Scenario",variable:"Variable",operation:"Operation","seq-group":"Sequence","and-group":"SequenceAND","or-group":"SequenceOR","next-step":"Next",jump:"Jump",step:"Step",alert:"Alert",activity:"Activity",animation:"Animation",viewpoint:"Viewpoint",viewpoints:"Viewpoints",objects:"Parts",object:"Part",metainfo:"Meta",assignment:"Assignment",assignments:"Assignments",question:"Question",list:"List","request-variable":"RequestVariable"},_scenario=null;Scenario.prototype.initialize=Scenario_initialize,Scenario.prototype.loadFromNode=Scenario_loadFromNode,Scenario.prototype.isLoaded=Scenario_isLoaded,Scenario.prototype.isActive=Scenario_isActive,Scenario.prototype.start=Scenario_start,Scenario.prototype.cancel=Scenario_cancel,Scenario.prototype.fail=Scenario_fail,Scenario.prototype.getScaledScore=Scenario_getScaledScore,Scenario.prototype.getSuccessStatus=Scenario_getSuccessStatus,Scenario.prototype.getSessionTime=Scenario_getSessionTime,Scenario.prototype.getVar=Scenario_getVar,Scenario.prototype.setVar=Scenario_setVar,Scenario.prototype.startStep=Scenario_startStep,Scenario.prototype.processStep=Scenario_processStep,Scenario.prototype.processInput=Scenario_processInput,Variable.prototype.equal=Variable_equal,Variable.prototype.defaultValueOf=Variable_defaultValueOf,Variable.prototype.valueOf=Variable_valueOf,Variable.prototype.setValue=Variable_setValue,Variable.prototype.getValueString=Variable_getValueString,Variable.prototype.loadFromNode=Variable_loadFromNode,Variable.prototype.initialize=Variable_initialize,Variable.prototype.toString=Variable_toString,Variable.prototype.toXML=Variable_toXML,Step.prototype.initialize=Step_initialize,Step.prototype.getExpectedOperations=Step_getExpectedOperations,Step.prototype.getOperations=Step_getOperations,Step.prototype.nextStep=Step_nextStep,Step.prototype.loadFromNode=Step_loadFromNode,Step.prototype.getScaledScore=Step_getScaledScore,Step.prototype.getSuccessStatus=Step_getSuccessStatus,Step.prototype.getRemainingAttempts=Step_getRemainingAttempts,Sequence.prototype.initialize=Sequence_initialize,Sequence.prototype.isCompleted=Sequence_isCompleted,Sequence.prototype.isActive=Sequence_isActive,Sequence.prototype.getExpectedOperations=Sequence_getExpectedOperations,Sequence.prototype.loadFromNode=Sequence_loadFromNode,Sequence.prototype.getOperations=Sequence_getOperations,Sequence.prototype.isInteractivity=Sequence_isInteractivity,SequenceAND.prototype.initialize=SequenceAND_initialize,SequenceAND.prototype.isCompleted=SequenceAND_isCompleted,SequenceAND.prototype.isActive=SequenceAND_isActive,SequenceAND.prototype.getExpectedOperations=SequenceAND_getExpectedOperations,SequenceAND.prototype.loadFromNode=Sequence_loadFromNode,SequenceAND.prototype.getOperations=Sequence_getOperations,SequenceAND.prototype.isInteractivity=Sequence_isInteractivity,SequenceOR.prototype.initialize=SequenceOR_initialize,SequenceOR.prototype.isCompleted=SequenceOR_isCompleted,SequenceOR.prototype.isActive=SequenceAND_isActive,SequenceOR.prototype.getExpectedOperations=SequenceOR_getExpectedOperations,SequenceOR.prototype.loadFromNode=Sequence_loadFromNode,SequenceOR.prototype.getOperations=SequenceOR_getOperations,SequenceOR.prototype.isInteractivity=Sequence_isInteractivity,Operation.prototype.initialize=Operation_initialize,Operation.prototype.isCompleted=Operation_isCompleted,Operation.prototype.isActive=Operation_isActive,Operation.prototype.checkPattern=Operation_checkPattern,Operation.prototype.getExpectedOperations=Operation_getExpectedOperations,Operation.prototype.loadFromNode=Operation_loadFromNode,Operation.prototype.getOperations=Operation_getOperations,Operation.prototype.isInteractivity=Operation_isInteractivity,Operation.prototype.toXML=Operation_toXML,Animation.prototype.loadFromNode=Animation_loadFromNode,Alert.prototype.setOperation=Alert_setOperation,Alert.prototype.equal=Alert_equal,Alert.prototype.loadFromNode=Alert_loadFromNode,Alert.prototype.isActive=Alert_isActive,Alert.prototype.initialize=Alert_initialize,Alert.prototype.getTemplate=Alert_getTemplate,Alert.prototype.toXML=Alert_toXML,RequestVariable.prototype.equal=RequestVariable_equal,RequestVariable.prototype.loadFromNode=RequestVariable_loadFromNode,RequestVariable.prototype.isActive=RequestVariable_isActive,RequestVariable.prototype.initialize=RequestVariable_initialize,RequestVariable.prototype.getTemplate=RequestVariable_getTemplate,Activity.prototype.equal=Activity_equal,Activity.prototype.loadFromNode=Activity_loadFromNode,Activity.prototype.isActive=Activity_isActive,Activity.prototype.initialize=Activity_initialize,Activity.prototype.getTemplate=Activity_getTemplate,Template.prototype.equal=Template_equal,Template.prototype.toString=Template_toString,Template.prototype.toXML=Template_toXML,Question.prototype.loadFromNode=Question_loadFromNode,List.prototype.loadFromNode=List_loadFromNode,Next.prototype.loadFromNode=Next_loadFromNode,Next.prototype.proceed=Next_proceed,Jump.prototype.loadFromNode=Jump_loadFromNode,Viewpoint.prototype.loadFromNode=Viewpoint_loadFromNode,Viewpoints.prototype.loadFromNode=_AbstractHolder_loadFromNode,Part.prototype.loadFromNode=Part_loadFromNode,Parts.prototype.loadFromNode=_AbstractHolder_loadFromNode,Meta.prototype.loadFromNode=Meta_loadFromNode,Meta.prototype.toString=Meta_toString,Meta.prototype.valueOf=Meta_toString,Metainfo.prototype.loadFromNode=_AbstractHolder_loadFromNode,Assignments.prototype.loadFromNode=_AbstractHolder_loadFromNode,Assignment.prototype.loadFromNode=Assignment_loadFromNode,Assignment.prototype.proceed=Assignment_proceed,Assignment.prototype.toXML=Assignment_toXML,History.prototype.initialize=History_initialize,History.prototype.isEmpty=History_isEmpty,History.prototype.drop=History_drop,History.prototype.pop=History_pop,History.prototype.push=History_push,History.prototype.toXML=History_toXML,HistoryStep.prototype.getSubsteps=HistoryStep_getSubsteps,HistoryStep.prototype.isNotInteractive=HistoryStep_isNotInteractive,HistoryStep.prototype.toXML=HistoryStep_toXML,HistoryInput.prototype.toXML=HistoryInput_toXML,HistoryOperation.prototype.toXML=HistoryOperation_toXML,HistoryFault.prototype.toXML=HistoryFault_toXML,HistoryStartScenario.prototype.toXML=HistoryStartScenario_toXML,HistoryFinishScenario.prototype.toXML=HistoryFinishScenario_toXML,module.exports={Scenario:Scenario,Variable:Variable}}.call(exports,__webpack_require__,exports,module))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(t,e,i){var s;void 0!==(s=function(t,e,s){var n=new function(){var t=null,e=!1,s=!1,n=function(e){console.error("ERROR: "+e+" - "+t.GetErrorString(e),": "+t.GetDiagnostic(e))};this.constructor.prototype.isStub=function(){return s},this.constructor.prototype.isTerminated=function(){return e},this.constructor.prototype.getAPI=function(){var e=function(t){for(var e=0;null==t.API_1484_11&&null!=t.parent&&t.parent!=t;){if(++e>500)return console.error("Error finding API -- too deeply nested."),null;t=t.parent}return t.API_1484_11};return t||(t=e(window),t||null==window.opener||void 0===window.opener||(t=e(window.opener)),t||(console.error("Unable to locate the LMS's API Implementation. Communication with the LMS will not occur."),console.log("Switch to LMS's API stub."),s=!0,t=i(4))),t},this.constructor.prototype.initialize=function(){var t=!1,e=this.getAPI();return e&&((t="true"==e.Initialize(""))||n(e.GetLastError())),t},this.constructor.prototype.terminate=function(){var t=!1,i=this.getAPI();return i&&(e||(e=!0,(t="true"==i.Terminate(""))||n(i.GetLastError()))),t},this.constructor.prototype.get=function(t){if(!e){var i=this.getAPI();if(i){var s=i.GetValue(t),r=i.GetLastError();if("0"==r)return s;n(r)}}},this.constructor.prototype.set=function(t,i){var s=!1;if(!e){var r=this.getAPI();r&&((s="true"==r.SetValue(t,i))||n(r.GetLastError()))}return s},this.constructor.prototype.commit=function(){var t=!1;if(!e){var i=this.getAPI();i&&((t="true"==i.Commit())||n(i.GetLastError()))}return t}};s.exports=n}.call(e,i,e,t))&&(t.exports=s)},function(t,e,i){var s;void 0!==(s=function(t,e,s){function n(t){return a.app.util.createResourceURL(t)||a.app.util.toUrl(t,a.app.modelInfo.baseURL)}function r(t){var e=t.split(" ");if("function"==typeof a.app.setCameraPosition)a.app.setCameraPosition(e.slice(3,6),e.slice(6,10),-1,e.slice(0,3),!0);else{var i=(e.slice(0,3).join(" "),e.slice(3,6).join(" ")),s=e.slice(6,10).join(" "),n="Viewpoint { jump FALSE position "+i+" orientation "+s+"}";o&&a.app.removeObjects(o),o=a.app.createObjectsFromString(n)[0],a.app.addObjects(o),a.once("core.didDrawAnimationFrame",function(){a.app.activeViewpoint=o})}}var o,a=window.Cortona3DSolo,c=a.app.procedure,l=(c.interactivity,a.app.modelInfo),u=l.companionFile.replace(/\.interactivity\.xml$/i,".training.xml"),p=i(1).Scenario,h=i(1).Variable,_=new p,m=i(5),d=-1,v=0,f=[],y={sco:m,interactivity:{json:{},getObjectName:function(t){return a.training.interactivity.json.$("scenario/objects/object").reduce(function(e,i){return i.$attr("id")===t?i.$attr("name"):e},"")},getObjectViewpoint:function(t){return a.training.interactivity.json.$("scenario/objects/object").reduce(function(e,i){if(i.$attr("id")===t){var s=i.$("metainfo").filter(function(t){return"$vp"===t.$attr("name")})[0];if(s)return s.$text()}return e},"")}},start:function(t){void 0===t&&(t=y.MODE_DEMO),d=t,_.start()},cancel:function(){_.cancel(),d=-1},fail:function(){_.fail(),d=-1},resume:function(){_.active=!0},isDemo:function(){return d===y.MODE_DEMO},isStudy:function(){return d===y.MODE_STUDY},isExam:function(){return d===y.MODE_EXAM},setViewpointValue:r,processInput:_.processInput.bind(_),processStep:_.processStep.bind(_),startStep:_.startStep.bind(_),getSuccessStatus:_.getSuccessStatus.bind(_),getScaledScore:_.getScaledScore.bind(_),getSessionTime:_.getSessionTime.bind(_),isActive:_.isActive.bind(_),createVariable:function(t,e){var i=new h;return i.name=t,i.type=e,i},restoreVariables:function(t){for(var e in t){var i=_.variables[e];_.variables[e].setValue("enumeration"===i.type?i.items.indexOf(t[e]):t[e])}}};Object.defineProperty(y,"MODE_DEMO",{value:0}),Object.defineProperty(y,"MODE_STUDY",{value:1}),Object.defineProperty(y,"MODE_EXAM",{value:2}),Object.defineProperty(y,"MODE_PLAY",{value:1}),Object.defineProperty(y,"MODE_STOP",{value:0}),Object.defineProperty(y,"MODE_PAUSE",{value:2}),Object.defineProperty(y,"activeStep",{get:function(){return _.activeStep},enumerable:!0,configurable:!0}),Object.defineProperty(y,"history",{get:function(){return _.history},enumerable:!0,configurable:!0}),Object.defineProperty(y,"variables",{get:function(){return _.variables},enumerable:!0,configurable:!0}),Object.defineProperty(y,"username",{get:function(){return _.username},set:function(t){_.username=t},enumerable:!0,configurable:!0}),Object.defineProperty(y,"scaledPassingScore",{get:function(){return _.scaledPassingScore},set:function(t){_.scaledPassingScore=t},enumerable:!0,configurable:!0}),Object.defineProperty(y,"mode",{get:function(){return+d},enumerable:!0,configurable:!0}),Object.defineProperty(y,"expected",{get:function(){return f},enumerable:!0,configurable:!0}),Object.defineProperty(y,"playMode",{get:function(){return+v},set:function(t){v!=t&&(v=t,a.dispatch("training.didChangePlayMode",t))},enumerable:!0,configurable:!0}),a.expand(_,{on_scenario_start:function(){f=[],a.dispatch("training.didStartScenario",d)},on_scenario_finish:function(){a.dispatch("training.didFinishScenario")},on_scenario_cancel:function(){f=[],a.dispatch("training.didCancelScenario")},on_step_start:function(t){a.dispatch("training.didStartScenarioStep",t)},on_step_finish:function(t){a.dispatch("training.didFinishScenarioStep",t)},on_expected_operations:function(t){f=t,a.dispatch("training.didChangeExpectedOperations",t)},on_operations:function(t,e){a.dispatch("training.didScenerioOperations",t,e)},on_step_input_failed:function(t,e){a.dispatch("training.didFailScenerioStepInput",t,e)}}),a.training=y,s.exports=function(t){var e=n(t);return a.app.util.loadResource(e,"text/xml").then(function(t){return a.app.util.revokeResourceURL(e),t.responseXML?Promise.resolve(a.app.util.xmlToJSON(t.responseXML)):Promise.reject(new Error(e+" empty content"))})}(u).then(function(t){return y.interactivity.json=t,_.loadFromNode(t.$("scenario")[0]),y})}.call(e,i,e,t))&&(t.exports=s)},function(t,e,i){var s;void 0!==(s=function(t,e,i){var s=new function(){function t(){var t=/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(.\d{1,2})(Z|[+-]\d{2}:\d{2}|[+-]\d{2})|(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(.\d{1,2})|(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})|(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2})|(\d{4})-(\d{2})-(\d{2})T(\d{2})|(\d{4})-(\d{2})-(\d{2})|(\d{4})-(\d{2})|(\d{4})/;return this.date=arguments.length&&arguments[0]instanceof Date?arguments[0]:new Date,this.constructor.prototype.toString=function(){var t=function(t){return t<10?"0"+t:t},e="";return e+=[this.date.getFullYear(),t(this.date.getMonth()+1),t(this.date.getDate())].join("-"),e+="T",e+=[t(this.date.getHours()),t(this.date.getMinutes()),t(this.date.getSeconds())+"."+t(Math.round(this.date.getMilliseconds()/10))].join(":")},this.constructor.prototype.check=function(e){var i=t.exec(e);return i&&i[0].length==e.length},this.constructor.prototype.parse=function(e){var i=t.exec(e);if(i&&i[0].length==e.length){var s=new Date(0),n=i[8],r=1;if(n){if(s.setUTCFullYear(i[r++]),r<i.length&&i[r]&&(s.setUTCMonth(i[r++]-1),r<i.length&&i[r]&&(s.setUTCDate(i[r++]),r<i.length&&i[r]&&(s.setUTCHours(i[r++]),r<i.length&&i[r]&&(s.setUTCMinutes(i[r++]),r<i.length&&i[r]&&(s.setUTCSeconds(i[r++]),r<i.length&&i[r]&&s.setUTCMilliseconds(1e3*i[r++])))))),"Z"!=n){var o="-"==n.charAt(0)?-1:1;n=n.split(":"),n=n.length>1?o*(parseInt(n[1])+60*Math.abs(n[0])):o*Math.abs(n[0])*60,s.setUTCMinutes(s.getUTCMinutes()-n)}}else{for(r=9;!i[r];r++);s.setFullYear(i[r++]),r<i.length&&i[r]&&(s.setMonth(i[r++]-1),r<i.length&&i[r]&&(s.setDate(i[r++]),r<i.length&&i[r]&&(s.setHours(i[r++]),r<i.length&&i[r]&&(s.setMinutes(i[r++]),r<i.length&&i[r]&&(s.setSeconds(i[r++]),r<i.length&&i[r]&&s.setMilliseconds(1e3*i[r++]))))))}this.date=s}return this},this.constructor.prototype.valueOf=function(){return this.date},this}function e(){var t=/P(\d+Y)?(\d+M)?(\d+D)?T?(\d+H)?(\d+M)?(\d+\.?\d{0,2}S)?/;return this.interval=arguments.length>0?arguments[0]:0,this.constructor.prototype.toString=function(){var t="P",e=this.interval,i=function(i,s){e>s&&(t+=Math.floor(e/s)+i,e%=s)};return i("Y",31104e3),i("M",2592e3),i("D",86400),e&&(t+="T",i("H",3600),i("M",60),(e=Math.round(100*e)/100)&&(t+=e+"S")),t},this.constructor.prototype.check=function(e){var i=t.exec(e);return i&&i[0].length==e.length},this.constructor.prototype.parse=function(e){var i=0,s=t.exec(e);if(s&&s[0].length==e.length){for(var n=[12,30,24,60,60,1],r=1,o=s.length-1;o>=1;o--)r*=n[o-1],i+=(s[o]?parseFloat(s[o].substring(0,s[o].length-1)):0)*r;this.interval=i}return this},this.constructor.prototype.valueOf=function(){return this.interval},this.constructor.prototype.add=function(t){return this.interval+=t,this},this.constructor.prototype.subtract=function(t){return this.interval-=t,this},this}var i,s=function(t){var e=t;if("object"==typeof t&&t instanceof Object){e={};for(var i in t)e[i]=s(t[i])}return e},n=0,r=0,o={0:"No Error",101:"General Exception",102:"General Initialization Failure",103:"Already Initialized",104:"Content Instance Terminated",111:"General Termination Failure",112:"Termination Before Initialization",113:"Termination After Termination",122:"Retrieve Data Before Initialization",123:"Retrieve Data After Termination",132:"Store Data Before Initialization",133:"Store Data After Termination",142:"Commit Before Initialization",143:"Commit After Termination",201:"General Argument Error",301:"General Get Failure",351:"General Set Failure",391:"General Commit Failure",401:"Undefined Data Model Element",402:"Unimplemented Data Model Element",403:"Data Model Element Value Not Initialized",404:"Data Model Element Is Read Only",405:"Data Model Element Is Write Only",406:"Data Model Element Type Mismatch",407:"Data Model Element Value Out Of Range",408:"Data Model Dependency Not Established"},a={cmi:{_version:{_value:"1.0",_type:"string",_access:5},comments_from_learner:{_count:{_value:0,_type:"integer",_access:5},_children:{_value:"comment,location,timestamp",_type:"string",_access:5},_items:[],_prototype:{comment:{_value:"",_type:"string",_access:3},location:{_value:"",_type:"string",_access:3},timestamp:{_value:"",_type:"time",_access:3}}},comments_from_lms:{_count:{_value:0,_type:"integer",_access:5},_children:{_value:"comment,location,timestamp",_type:"string",_access:5},_items:[],_prototype:{comment:{_value:"",_type:"string",_access:1},location:{_value:"",_type:"string",_access:1},timestamp:{_value:"",_type:"time",_access:1}}},completion_status:{_value:"unknown",_type:"state(completed;incomplete;not attempted;unknown)",_access:3},completion_threshold:{_value:"",_type:"real",_access:1},credit:{_value:"credit",_type:"state(credit;no-credit)",_access:1},entry:{_value:"ab-initio",_type:"state(ab-initio;resume;)",_access:1},exit:{_value:"",_type:"state(time-out;suspend;logout;normal;)",_access:2},interactions:{_count:{_value:0,_type:"integer",_access:5},_children:{_value:"id,type,objectives,timestamp,correct_responses,weighting,learner_response,result,latency,description",_type:"string",_access:5},_items:[],_prototype:{id:{_value:"",_type:"string",_access:3},type:{_value:"",_type:"state(true-false;choice;fill-in;long-fill-in;likert;matching;performance;sequencing;numeric;other)",_access:3},objectives:{_count:{_value:0,_type:"integer",_access:5},_items:[],_prototype:{id:{_value:"",_type:"string",_access:3}}},timestamp:{_value:"",_type:"time",_access:3},correct_responses:{_count:{_value:0,_type:"integer",_access:5},_items:[],_prototype:{pattern:{_value:"",_type:"string",_access:3}}},weighting:{_value:0,_type:"real",_access:3},learner_response:{_value:"",_type:"string",_access:3},result:{_value:"",_type:"state(correct;incorrect;unanticipated;neutral)|real",_access:3},latency:{_value:0,_type:"timeinterval",_access:3},description:{_value:"",_type:"string",_access:3}}},launch_data:{_value:"",_type:"string",_access:1},learner_id:{_value:"urn:VTE:user-generic-id",_type:"string",_access:5},learner_name:{_value:"user_generic_name",_type:"string",_access:5},learner_preference:{_count:{_value:0,_type:"integer",_access:5},_children:{_value:"audio_level,language,delivery_speed,audio_captioning",_type:"string",_access:5},_items:[],_prototype:{audio_level:{_value:1,_type:"real",_access:7},language:{_value:"",_type:"string",_access:7},delivery_speed:{_value:1,_type:"real",_access:7},audio_captioning:{_value:"0",_type:"state(-1;0;1)",_access:7}}},location:{_value:"",_type:"string",_access:3},max_time_allowed:{_value:"",_type:"timeinterval",_access:1},mode:{_value:"normal",_type:"state(browse;normal;review)",_access:5},objectives:{_count:{_value:0,_type:"integer",_access:5},_children:{_value:"id,score,success_status,completion_status,description",_type:"string",_access:5},_items:[],_prototype:{id:{_value:"",_type:"string",_access:3},score:{_children:{_value:"scaled,raw,min,max",_type:"string",_access:5},scaled:{_value:"",_type:"real",_access:3},raw:{_value:"",_type:"real",_access:3},min:{_value:"",_type:"real",_access:3},max:{_value:"",_type:"real",_access:3}},success_status:{_value:"unknown",_type:"state(passed;failed;unknown)",_access:7},completion_status:{_value:"unknown",_type:"state(completed;incomplete;not attempted;unknown)",_access:7},description:{_value:"",_type:"string",_access:3}}},progress_measure:{_value:"",_type:"real",_access:3,_relationship:function(t){return a.cmi.progress_measure._value=t,a.cmi.progress_measure._access|=4,0==t?(a.cmi.completion_status._value="not attempted",a.cmi.completion_status._access|=4):1==t&&(a.cmi.completion_status._value="completed",a.cmi.completion_status._access|=4),4&a.cmi.completion_threshold._access&&(t>=a.cmi.completion_threshold._value?a.cmi.completion_status._value="completed":a.cmi.completion_status._value="incomplete",a.cmi.completion_status._access|=4),"true"}},scaled_passing_score:{_value:"",_type:"real",_access:1},score:{_children:{_value:"scaled,raw,min,max",_type:"string",_access:5},scaled:{_value:"",_type:"real",_access:3,_relationship:function(t){return a.cmi.score.scaled._value=t,a.cmi.score.scaled._access|=4,4&a.cmi.scaled_passing_score._access&&(t>=a.cmi.scaled_passing_score._value?a.cmi.success_status._value="passed":a.cmi.success_status._value="failed",a.cmi.success_status._access|=4),"true"}},raw:{_value:"",_type:"real",_access:3},min:{_value:"",_type:"real",_access:3},max:{_value:"",_type:"real",_access:3}},session_time:{_value:"",_type:"timeinterval",_access:2},success_status:{_value:"unknown",_type:"state(passed;failed;unknown)",_access:7},suspend_data:{_value:"",_type:"string",_access:3},time_limit_action:{_value:"continue,no message",_type:"state(exit,message;continue,message;exit,no message;continue,no message)",_access:5},total_time:{_value:"PT0H0M0S",_type:"timeinterval",_access:5}}};this.constructor.prototype.Initialize=function(){switch(i="Initialize()",r=101,n){case 0:r=0,n=1;break;case 1:return r=103,"false";case 2:return r=104,"false"}return"true"},this.constructor.prototype.Terminate=function(){switch(i="Terminate()",r=101,n){case 0:return r=112,"false";case 1:r=0,n=2;break;case 2:return r=113,"false"}return"true"},this.constructor.prototype.Commit=function(){switch(i="Commit()",r=101,n){case 0:return r=142,"false";case 1:r=0;case 2:return r=143,"false"}return"true"},this.constructor.prototype.GetLastError=function(){return r},this.constructor.prototype.GetErrorString=function(t){return o[t]},this.constructor.prototype.GetDiagnostic=function(t){return i},this.constructor.prototype.SetValue=function(o,c){i="SetValue('"+o+"', '"+c+"')";var l=arguments.length>2&&arguments[2];if(!l)switch(n){case 0:return r=132,"false";case 2:return r=133,"false"}r=0;for(var u=o.split("."),p=a;u.length;){var o=u.shift(),h=parseInt(o);if(isNaN(h)){if(!(o in p))return r=401,"false";p=p[o]}else{if(!("_items"in p))return r=351,"false";if(p._items.length>h)p=p._items[h];else{if(p._items.length!=h)return r=351,"false";p._items[h]=s(p._prototype),p._count._value=p._items.length,p=p._items[h]}}}if(p instanceof Object&&"_value"in p){if(0!=(8&p._access))return r=402,"false";if(!l&&0==(2&p._access))return r=404,"false";for(var _=p._type.split("|"),m=!1,d=0;d<_.length&&!m;d++){var v=/(\w+)\(?([\w\s-,;]*)\)?/.exec(_[d]);if(v)switch(v[1]){case"state":for(var f=v[2].split(";"),y=0;y<f.length&&!m;y++)m=f[y]==c;break;case"integer":m=""!=c&&!isNaN(parseInt(c));break;case"real":m=""!=c&&!isNaN(parseFloat(c));break;case"timeinterval":m=""!=c&&(new e).check(c);break;case"time":m=""!=c&&(new t).check(c);break;default:m=!0}}return m?"_relationship"in p?p._relationship(c):(p._value=c,p._access|=4,"true"):(r=406,"false")}return r=351,"false"},this.constructor.prototype.GetValue=function(t){switch(i="GetValue('"+t+"')",n){case 0:return r=122,"false";case 2:return r=123,"false"}r=0;for(var e=t.split("."),s=a;e.length;){var t=e.shift(),o=parseInt(t);if(isNaN(o)){if(!(t in s))return r=401,"";s=s[t]}else{if(!("_items"in s))return r=301,"";if(!(s._items.length>o))return r=301,"";s=s._items[o]}}return s instanceof Object&&"_value"in s?0!=(8&s._access)?(r=402,""):0==(1&s._access)?(r=405,""):0==(4&s._access)?(r=403,""):s._value:(r=301,"")},this.constructor.prototype.GetNewTimeIntervalObject=function(t){return new e(t)},this.constructor.prototype.GetNewTimeObject=function(){return new t},this.constructor.prototype.getData=function(){return a}};i.exports=s}.call(e,i,e,t))&&(t.exports=s)},function(t,e,i){var s;void 0!==(s=function(t,e,s){function n(t){return Math.round(100*t)/100}function r(){_.initialize()}function o(){_.isTerminated()||(m.training.isActive()?(_.set("cmi.session_time","PT"+m.training.getSessionTime()+"S"),_.set("cmi.exit","suspend")):_.set("cmi.exit","logout"),_.terminate())}function a(){m.training.username=_.get("cmi.learner_name"),m.training.isExam()?(_.set("cmi.completion_status","incomplete"),_.set("cmi.success_status","unknown"),_.set("cmi.score.min","0"),_.set("cmi.score.max","100"),_.set("cmi.score.raw","0"),_.set("cmi.score.scaled","0")):"completed"!==_.get("cmi.completion_status")&&_.set("cmi.completion_status","incomplete")}function c(){var t="PT"+m.training.getSessionTime()+"S",e=m.training.getSuccessStatus(),i=m.training.getScaledScore();_.set("cmi.session_time",t),e&&(_.set("cmi.completion_status","completed"),_.set("cmi.success_status",e)),m.training.isExam()&&(_.set("cmi.score.raw",String(Math.round(100*i))),_.set("cmi.score.scaled",String(n(i))),e&&o())}function l(){}function u(){}function p(){}function h(){}var _=i(2),m=Cortona3DSolo;s.exports={loadPage:r,unloadPage:o,scenarioStart:a,scenarioFinish:c,loadScenario:l,stepStarted:u,stepFinished:p,stepFailed:h}}.call(e,i,e,t))&&(t.exports=s)}])});