/*! Cortona3D Solo Universal Viewer bundle - work-instructions, Copyright (c) 2015-2018 Paragraphics, Ltd. (http://www.cortona3d.com/) */
define(function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=12)}({12:function(e,t,r){var n;void 0!==(n=function(e,t,r){function n(e){return c.app.util.createResourceURL(e)||c.app.util.toUrl(e,c.app.modelInfo.baseURL)}function o(e){var t=c.app.getChildObjects(e);return t.reduce(function(e,t){return e.concat(o(t))},t.filter(function(e){return 2===c.app.getObjectFlags(e)}))}var i,c=window.Cortona3DSolo,a=c.app.procedure,u=a.interactivity,p={},f={},l=!1,d=o(),s={bom:[],togglePMI:function(e){d.forEach(function(t){c.app.setObjectPropertyf(t,c.app.PROPERTY_VISIBILITY,!1,e?0:-1)})},interactivity:{json:{},getPartByDocId:function(e){return p[e]},getBomItemByDocId:function(e){return f[e]}}};Object.defineProperty(s,"jobMode",{get:function(){return l},set:function(e){l!=e&&(l=e,c.dispatch("rwi.didChangeJobMode",l))},enumerable:!0,configurable:!0}),Object.defineProperty(s,"activeTask",{get:function(){return i},enumerable:!0,configurable:!0}),c.rwi=s,r.exports=function(e){var t=n(e);return c.app.util.loadResource(t,"text/xml").then(function(e){return c.app.util.revokeResourceURL(t),e.responseXML?Promise.resolve(c.app.util.xmlToJSON(e.responseXML)):Promise.reject(new Error(t+" empty content"))})}(u.json.$text("SimulationInteractivity/SimulationInformation/DocumentFile")).then(function(e){s.interactivity.json=e;var t=e.rwi.slice(-1)[0],r=t.$("job/task");return t.$("bom/part").forEach(function(e){var t,r=e.$attr("id"),n=e.$attr("type"),o=u.getObjectNamesByDocId(r).map(c.app.getObjectWithName)[0],i=f[r]||{id:r,children:[]};for(n&&(i.type=n);!t&&o;)o=c.app.getParentObject(o),t=u.getDocIdByObjectName(c.app.getObjectName(o));t?(i.parent=t,f[t]||(f[t]={id:t,children:[]}),f[t].children.push(i)):s.bom.push(i),f[r]=i,p[r]=e}),c.on("app.procedure.didEnterSubstepWithName",function(e){var t=c.app.procedure.getContextItemId(e),n=r.filter(function(e){return e.$attr("id")===t})[0];n&&(c.dispatch("rwi.didTaskActive",t,n),i=n)}),s})}.call(t,r,t,e))&&(e.exports=n)}})});